document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll('[id^="updateShopItemBtn"]').forEach((e=>{e.addEventListener("click",(function(t){t.preventDefault(),e.innerHTML='\n                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>\n                Updating...\n            ';const r=e.dataset.itemid,n=document.querySelector(`#updateShopItem${r}`),u=n.querySelector(".update-shop-item-modal"),a=n.querySelector("#titleInput_update").value,o=n.querySelector("#categoryInput_update").value,c=n.querySelector("#educationLevelInput_update").value,d=n.querySelector("#subjectInput_update").value,l=n.querySelector("#descriptionInput_update").value,i=n.querySelector("#oldPriceInput_update").value,p=n.querySelector("#newPriceInput_update").value,s={item_id:n.querySelector("#itemID").value,title:a,category:o,education_level:c,subject:d,description:l,old_price:i,new_price:p},v=n.querySelector('input[name="csrfmiddlewaretoken"]').value;fetch("/vendors/update-shop-item/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":v},body:JSON.stringify(s)}).then((e=>e.json())).then((e=>{"success"===e.status?u.innerHTML=`\n                        <div class="alert alert-success" role="alert">\n                            ${e.message}\n                        </div>\n                    `:u.innerHTML=`\n                        <div class="alert alert-danger" role="alert">\n                            ${e.message}\n                        </div>\n                    `,setTimeout((function(){window.location.reload()}),500)})).catch((e=>{console.error("Error:",e)}))}))}))})),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll('[data-bs-target^="#updateShopItem"]').forEach((e=>{e.addEventListener("click",(function(t){t.preventDefault();const r=e.dataset.itemid;fetch(`/vendors/api/get-product-details/${r}/`).then((e=>e.json())).then((t=>{const r=document.querySelector(e.dataset.bsTarget);r.querySelector("#titleInput_update").value=t.title,r.querySelector("#categoryInput_update").value=t.category_id,r.querySelector("#educationLevelInput_update").value=t.education_level_id,r.querySelector("#subjectInput_update").value=t.subject_id,r.querySelector("#descriptionInput_update").value=t.description,r.querySelector("#oldPriceInput_update").value=t.old_price,r.querySelector("#newPriceInput_update").value=t.new_price})).catch((e=>{console.error("Error:",e)}))}))}))}));