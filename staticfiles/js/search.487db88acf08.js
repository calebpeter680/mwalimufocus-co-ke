$(document).ready((function(){const t=$(".search-results-container");function e(t,e){const n=`\\b(${e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").split(/\s+/).filter(Boolean).join("|")})\\b`,s=new RegExp(n,"gi");return t.replace(s,'<span class="highlight-search">$&</span>')}$('#site-wide-search-form input[type="text"]').on("input",(function(){!function(n){n.length>0?$.ajax({url:"/search/",method:"GET",data:{query:n},success:function(s){const c=s.shop_items;t.empty(),c.length>0?(c.forEach((s=>{const c=e(s.title,n),r=e(s.category,n),o=e(s.subject,n),i=e(s.education_level,n),a=`\n                                <div class="mb-3">\n                                    <div class="card">\n                                        <div class="card-body">\n                                            <h5 class="card-title">\n                                                <a href="/${s.category_slug}/${s.id}/${s.slug}/" style="font-size: 18px; text-decoration: none; color: blue;">\n                                                    ${c}\n                                                </a>\n                                            </h5>\n                                            <div class="row">\n                                                <div class="col">\n                                                    <p class="card-text"><strong>Category</strong>: ${r}</p>\n                                                </div>\n                                                <div class="col">\n                                                    <p class="card-text"><strong>Subject</strong>: ${o}</p>\n                                                </div>\n                                                <div class="col">\n                                                    <p class="card-text"><strong>Level</strong>: ${i}</p>\n                                                </div>\n                                                <div class="col">\n                                                    <p class="card-text"><strong>Price</strong>: Ksh ${s.price}</p>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            `;t.append(a)})),t.show()):(t.html("<p>No results matched your query.</p>"),t.show())},error:function(t,e,n){console.error("Error fetching search results:",n)}}):t.hide()}($(this).val().trim())})),$(document).on("click",(function(e){$(e.target).closest("#site-wide-search-form").length||$(e.target).closest(".search-results-container").length||t.hide()})),$('#site-wide-search-form input[type="text"]').on("keyup",(function(){""===$(this).val().trim()&&t.hide()})),t.hide()}));